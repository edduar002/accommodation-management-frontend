<div class="row g-4">

  <!-- Encabezado principal de la sección -->
  <div class="text-center mb-4">
    <h2 class="fw-bold">Reservas</h2>
    <p class="text-muted">Consulta el estado de las reservas realizadas de tus alojamientos</p>
  </div>

  <!-- Listado dinámico de reservas -->
  <div class="col-md-4" *ngFor="let reservation of reservations">

    <!-- Card individual de reserva -->
    <div class="card border-0 shadow-sm rounded-4">

      <!-- Imagen del alojamiento asociado a la reserva -->
      <img [src]="reservation.imgUrl" class="card-img-top rounded-top-4" alt="Imagen del alojamiento">

      <div class="card-body">

        <!-- Nombre o descripción detallada del alojamiento -->
        <h5 class="card-title fw-bold">{{ reservation.detailedDescription }}</h5>

        <!-- Ciudad del alojamiento -->
        <p class="card-text text-muted mb-2">{{ reservation.cityName }}</p>

        <!-- Fechas de la reserva y estado actual -->
        <p class="card-text small">
          <strong>Fechas:</strong>
          {{ reservation.checkIn | date:'dd/MM/yyyy' }} -
          {{ reservation.checkOut | date:'dd/MM/yyyy' }} <br>

          <strong>Estado:</strong>
          <span class="badge" [ngClass]="{
            'bg-success': reservation.state == 'Aprobado',
            'bg-primary': reservation.state == 'Concluida',
            'bg-danger': reservation.state == 'Denegado',
            'bg-warning text-dark': reservation.state == 'Pendiente',
            'bg-secondary': reservation.state == 'Concluida'
          }">
            {{ reservation.state }}
          </span>
        </p>

        <!-- Selector para cambiar el estado de la reserva (solo si NO está concluida) -->
        <div class="mb-3" *ngIf="reservation.state !== 'Concluida'">
          <label class="form-label small fw-semibold">Cambiar estado:</label>
          <select class="form-select form-select-sm" [(ngModel)]="reservation.state"
            (change)="updateStatus(reservation, reservation.state)">
            <option value="Pendiente">Pendiente</option>
            <option value="Aprobado">Aprobado</option>
            <option value="Denegado">Denegado</option>
            <option value="Concluida">Concluida</option>
          </select>
        </div>

        <!-- Botón para ver detalles de la reserva -->
        <button class="btn btn-outline-secondary btn-sm" [routerLink]="['/detailReservation', reservation.id]">
          Ver Detalle
        </button>

      </div>
    </div>
  </div>
</div>