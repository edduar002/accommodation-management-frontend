<div class="row g-4">

  <!-- Encabezado principal -->
  <div class="text-center mb-4">
    <h2 class="fw-bold">Reservas</h2>
    <p class="text-muted">Consulta el estado de las reservas realizadas de tus alojamientos</p>
  </div>

  <!-- Listado dinámico de reservas -->
  <div class="col-md-4" *ngFor="let reservation of reservations">
    <div class="card border-0 shadow-sm rounded-4">

      <!-- Imagen del alojamiento (placeholder si no existe imagen real) -->
      <img [src]="'https://via.placeholder.com/400x250?text=Sin+Imagen'" class="card-img-top rounded-top-4"
        alt="Imagen del alojamiento">

      <div class="card-body">

        <!-- Nombre del alojamiento -->
        <h5 class="card-title fw-bold">reservation.name</h5>

        <!-- Ciudad o ubicación -->
        <p class="card-text text-muted mb-2">reservation.city</p>

        <!-- Fechas y estado actual de la reserva -->
        <p class="card-text small">
          <strong>Fechas:</strong>
          {{ reservation.checkIn | date:'dd/MM/yyyy' }} -
          {{ reservation.checkOut | date:'dd/MM/yyyy' }} <br>

          <strong>Estado:</strong>
          <span class="badge" [ngClass]="{
              'bg-success': reservation.state == 'Aprobado',
              'bg-primary': reservation.state == 'Realizado',
              'bg-danger': reservation.state == 'Denegado',
              'bg-warning text-dark': reservation.state == 'Pendiente'
            }">
            {{ reservation.state }}
          </span>
        </p>

        <!-- Campo desplegable para actualizar el estado de la reserva -->
        <div class="mb-3">
          <label class="form-label small fw-semibold">Cambiar estado:</label>
          <select class="form-select form-select-sm" [(ngModel)]="reservation.state"
            (change)="updateStatus(reservation, reservation.state)">
            <option value="Pendiente">Pendiente</option>
            <option value="Aprobado">Aprobado</option>
            <option value="Denegado">Denegado</option>
            <option value="Realizado">Realizado</option>
          </select>
        </div>

        <!-- Botón para ver detalles de la reserva -->
        <button class="btn btn-outline-secondary btn-sm" [routerLink]="['/detailReservation', reservation.id]">
          Ver Detalle
        </button>

      </div>
    </div>
  </div>

</div>